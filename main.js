!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_state_error",errorClass:"modal__error"},t=(e,t,r)=>{const o=t.id+"-error";e.querySelector("#"+o).textContent="",t.classList.remove(r.inputErrorClass)},r=(e,t,r)=>{c(e)?o(t,r):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},n=e=>{document.querySelectorAll(e.formSelector).forEach(t=>{((e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);r(o,n,t),o.forEach(c=>{c.addEventListener("input",function(){a(e,c,t),r(o,n,t)})})})(t,e)})},a=(e,r,o)=>{r.validity.valid?t(e,r,o):((e,t,r,o)=>{const n=t.id+"-error";e.querySelector("#"+n).textContent=r,t.classList.add(o.inputErrorClass)})(e,r,r.validationMessage,o)},c=e=>e.some(e=>!e.validity.valid);n(e);function s(e,t,r="Save",o="Saving..."){e.textContent=t?o:r}const i=document.querySelector(".profile__edit"),l=document.querySelector("#edit-profile-modal"),d=l.querySelector(".modal__close-button"),u=document.querySelector(".profile__plus"),m=document.querySelector("#new-post-modal"),_=m.querySelector(".modal__close-button"),h=l.querySelector("#profile-name-input"),f=l.querySelector("#profile-description-input"),v=document.querySelector(".profile__name"),y=document.querySelector(".profile__description"),b=document.forms["edit-profile-form"],S=m.querySelector(".modal__form"),p=m.querySelector("#card-image-input"),q=m.querySelector("#profile-caption-input"),E=document.querySelector("#card-template"),L=document.querySelector(".cards__list"),k=document.querySelector("#image-modal"),g=k.querySelector(".modal__image"),C=k.querySelector(".modal__caption"),$=k.querySelector(".modal__close-button"),j=document.querySelector(".modal__submit-button"),U=(document.querySelectorAll(".modal"),document.querySelector(".profile__avatar")),x=document.querySelector("#edit-avatar-modal"),D=document.querySelector(".profile__avatar-btn"),P=x.querySelector(".modal__form"),A=x.querySelector("#profile-avatar-input"),I=x.querySelector(".modal__close-button"),T=x.querySelector(".modal__submit-button"),w=document.querySelector("#delete-modal"),N=w.querySelector(".modal__close-button"),B=(w.querySelector(".modal_delete-btn"),w.querySelector(".modal_cancel-btn")),O=w.querySelector(".modal__form");let J,H;const z=new class{constructor({baseUrl:e,headers:t}){this._baseUrl=e,this._headers=t}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}getInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}editUserInfo({name:e,about:t}){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}addNewCard({name:e,link:t}){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}changeAvatar({avatar:e}){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}toggleLike(e,t){const r=t?"DELETE":"PUT";return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:r,headers:this._headers}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"0e767bbd-27a7-4fb4-a437-99304015b845","Content-Type":"application/json"}});function M(e){const t=E.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),o=t.querySelector(".card__image");o.src=e.link,o.alt=e.name,r.textContent=e.name;const n=t.querySelector(".card__heart-button");return e.isLiked&&n.classList.add("card__heart-button_active"),n.addEventListener("click",t=>{t.preventDefault();const r=n.classList.contains("card__heart-button_active");!function(e,t,r){z.toggleLike(e,t).then(()=>{r.classList.toggle("card__heart-button_active")}).catch(e=>{console.error(e)})}(e._id,r,n)}),t.querySelector(".card__delete-button").addEventListener("click",r=>{r.preventDefault(),function(e,t){K(w),J=e,H=t}(t,e._id)}),o.addEventListener("click",function(){C.textContent=r.textContent,g.src=o.src,g.alt=o.alt,K(k)}),t}function F(e,t){e.target==t&&Q(t)}function G(e,t){"Escape"===e.key&&Q(t)}function K(e){e.classList.add("modal_is-opened"),e.addEventListener("click",t=>{F(t,e)}),document.addEventListener("keydown",t=>{G(t,e)})}function Q(e){e.classList.remove("modal_is-opened"),e.removeEventListener("click",F),e.removeEventListener("keydown",G)}z.getInfo().then(([e,t])=>{e.forEach(function(e){const t=M(e);L.prepend(t)}),U.src=t.avatar,v.textContent=t.name,y.textContent=t.about}).catch(e=>{console.error(e)}),i.addEventListener("click",function(){var r,o;h.value=v.textContent,f.value=y.textContent,r=b,o=e,[h,f].forEach(e=>{t(r,e,o)}),K(l)}),d.addEventListener("click",function(){Q(l)}),u.addEventListener("click",function(){K(m)}),_.addEventListener("click",function(){Q(m)}),D.addEventListener("click",function(){K(x)}),I.addEventListener("click",function(){Q(x)}),$.addEventListener("click",function(){Q(k)}),N.addEventListener("click",function(){Q(w)}),B.addEventListener("click",function(){Q(w)}),O.addEventListener("submit",function(e){e.preventDefault();const t=e.submitter;s(t,!0,"Delete","Deleting"),z.deleteCard(H).then(()=>{Q(w),J.remove()}).catch(e=>{console.error(e)}).finally(()=>{s(t,!1,"Delete","Deleting")})}),b.addEventListener("submit",function(e){e.preventDefault();const t=e.submitter;s(t,!0),z.editUserInfo({name:h.value,about:f.value}).then(e=>{v.textContent=e.name,y.textContent=e.about}).catch(e=>{console.error(e)}).finally(()=>{s(t,!1)}),Q(l)}),P.addEventListener("submit",function(t){t.preventDefault();const r=t.submitter;s(r,!0),z.changeAvatar({avatar:A.value}).then(e=>{U.src=e.avatar}).catch(e=>{console.error(e)}).finally(()=>{s(r,!1)}),t.target.reset(),o(T,e),Q(x)}),n(e),S.addEventListener("submit",function(t){t.preventDefault();const r=t.submitter;s(r,!0),z.addNewCard({name:q.value,link:p.value}).then(e=>{const t={};t.link=e.link,t.name=e.name,L.prepend(M(t))}).catch(e=>{console.error(e)}).finally(()=>{s(r,!1)}),t.target.reset(),o(j,e),Q(m)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3pCeEUsRUFBTzRCLGFBQWEsQ0FBQ0MsT0FBUXRDLEVBQW9CK0UsUUFDOUM3RCxLQUFNMEIsSUFDTGhELEVBQWNzRCxJQUFNTixFQUFLTixTQUUxQm9CLE1BQU1DLElBQ0xDLFFBQVFDLE1BQU1GLEtBRWZ3QixRQUFRLEtBQ1BsSCxFQUFjZ0gsR0FBVyxLQUU3QjVCLEVBQUllLE9BQU9nQixRQUNYeEksRUFBY3NELEVBQXFCM0UsR0FDbkM4SSxFQUFXeEUsRUFDYixHQXFDQTlDLEVBQWlCeEIsR0FFakIyRCxFQUFtQjFCLGlCQUFpQixTQTlFcEMsU0FBNkI2RixHQUMzQkEsRUFBSUMsaUJBQ0osTUFBTTJCLEVBQVk1QixFQUFJNkIsVUFDdEJqSCxFQUFjZ0gsR0FBVyxHQUN6QnhFLEVBQU8wQixXQUFXLENBQUNOLEtBQU16QyxFQUFvQjJGLE1BQU8zQyxLQUFNakQsRUFBaUI0RixRQUN4RTdELEtBQU0wQixJQUNMLE1BQU04QixFQUFPLENBQUMsRUFDZEEsRUFBS3RDLEtBQU9RLEVBQUtSLEtBQ2pCc0MsRUFBSzdDLEtBQU9lLEVBQUtmLEtBQ2pCdkMsRUFBVXVGLFFBQVFsQyxFQUFlK0IsTUFFbENoQixNQUFNQyxJQUNMQyxRQUFRQyxNQUFNRixLQUVmd0IsUUFBUSxLQUNQbEgsRUFBY2dILEdBQVcsS0FFN0I1QixFQUFJZSxPQUFPZ0IsUUFDWHhJLEVBQWMrQyxFQUFlcEUsR0FDN0I4SSxFQUFXM0YsRUFDYixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9oZWxwZXJzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9hcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3N0YXRlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCJcbn1cblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBlcnJvck1lc3NhZ2UsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1lc3NhZ2VJRCA9IGlucHV0RWwuaWQgKyBcIi1lcnJvclwiO1xuICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgZXJyb3JNZXNzYWdlSUQpO1xuICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNZXNzYWdlSUQgPSBpbnB1dEVsLmlkICsgXCItZXJyb3JcIjtcbiAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihcIiNcIiArIGVycm9yTWVzc2FnZUlEKTtcbiAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gIGJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgYnV0dG9uRWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KVxufTtcblxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgY29uZmlnKVxuICB9KVxufVxuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7IiwiZXhwb3J0IGZ1bmN0aW9uIHNldEJ1dHRvblRleHQoYnRuLCBpc0xvYWRpbmcsIGRlZmF1bHRUZXh0ID0gXCJTYXZlXCIsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIil7XG4gIGlmIChpc0xvYWRpbmcpe1xuICAgIGJ0bi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICB9ZWxzZXtcbiAgICBidG4udGV4dENvbnRlbnQgPSBkZWZhdWx0VGV4dDtcbiAgfVxufSIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCBzZXR0aW5ncywgcmVzZXRWYWxpZGF0aW9uLCBkaXNhYmxlQnV0dG9uIH0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IGluaXRpYWxDYXJkcyBmcm9tIFwiLi4vc2NyaXB0cy9jYXJkcy5qc1wiO1xuaW1wb3J0IGFwaSBmcm9tIFwiLi4vdXRpbHMvYXBpLmpzXCI7XG5pbXBvcnQge3NldEJ1dHRvblRleHR9IGZyb20gXCIuLi91dGlscy9oZWxwZXJzLmpzXCI7XG5cbmNvbnN0IGVkaXRQcm9maWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0XCIpO1xuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVDbG9zZUJ0biA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuY29uc3QgbmV3UG9zdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGx1c1wiKTtcbmNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtbW9kYWxcIik7XG5jb25zdCBuZXdQb3N0Q2xvc2VCdG4gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZU5hbWVFbGVtZW50PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGUtZm9ybVwiXTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgYWRkQ2FyZExpbmtJbnB1dCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2UtaW5wdXRcIik7XG5jb25zdCBhZGRDYXJkQ2FwdGlvbklucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1jYXB0aW9uLWlucHV0XCIpO1xuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmNvbnN0IGltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLW1vZGFsXCIpO1xuY29uc3QgbW9kYWxJbWFnZSA9IGltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBtb2RhbENhcHRpb24gPSBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5jb25zdCBpbWFnZU1vZGFsQ2xvc2VCdG4gPSBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIpO1xuY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcbmNvbnN0IGVkaXRBdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1hdmF0YXItbW9kYWxcIik7XG5jb25zdCBlZGl0QXZhdGFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnRuXCIpO1xuY29uc3QgZWRpdEF2YXRhckZvcm0gPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGVkaXRBdmF0YXJMaW5rSW5wdXQgPSBlZGl0QXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1pbnB1dFwiKTtcbmNvbnN0IGVkaXRBdmF0YXJDbG9zZUJ0biA9IGVkaXRBdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBlZGl0QXZhdGFyU3VibWl0QnRuID0gZWRpdEF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XG5jb25zdCBkZWxldGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLW1vZGFsXCIpO1xuY29uc3QgZGVsZXRlTW9kYWxDbG9zZUJ0biA9IGRlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IGRlbGV0ZU1vZGFsRGVsZXRlQnRuID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9kZWxldGUtYnRuXCIpO1xuY29uc3QgZGVsZXRlTW9kYWxDYW5jZWxCdG4gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2NhbmNlbC1idG5cIik7XG5jb25zdCBkZWxldGVGb3JtID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmxldCBzZWxlY3RlZENhcmQ7XG5sZXQgc2VsZWN0ZWRDYXJkSWQ7XG5cbmNvbnN0IG5ld0FwaSA9IG5ldyBhcGkoe1xuICBiYXNlVXJsOiBgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFgLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCIwZTc2N2JiZC0yN2E3LTRmYjQtYTQzNy05OTMwNDAxNWI4NDVcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICB9XG59KTtcblxubmV3QXBpLmdldEluZm8oKVxuICAudGhlbigoW2NhcmRzLCBpbmZvXSk9PntcbiAgICBjYXJkcy5mb3JFYWNoKCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgY29uc3QgY3JlYXRlZENhcmQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcbiAgICAgIGNhcmRzTGlzdC5wcmVwZW5kKGNyZWF0ZWRDYXJkKTtcbiAgICB9KTtcbiAgICBwcm9maWxlQXZhdGFyLnNyYyA9IGluZm8uYXZhdGFyO1xuICAgIC8vc2V0IHRleHRDb250ZW50IG9mIGJvdGggdGV4dCBlbFxuICAgIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGluZm8ubmFtZTtcbiAgICBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gaW5mby5hYm91dDtcbiAgfSlcbiAgLmNhdGNoKGVyciA9PntcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pXG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpe1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNhcmRJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY29uc3QgY2FyZEhlYXJ0QnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19oZWFydC1idXR0b25cIik7XG4gIGlmKGRhdGEuaXNMaWtlZCl7XG4gICAgY2FyZEhlYXJ0QnRuLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19oZWFydC1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgY2FyZEhlYXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KT0+e1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGlzTGlrZWQgPSBjYXJkSGVhcnRCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9faGVhcnQtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICBoYW5kbGVIZWFydEJ0bihkYXRhLl9pZCwgaXNMaWtlZCwgY2FyZEhlYXJ0QnRuKTtcbiAgfSk7XG4gIGNvbnN0IGNhcmREZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gIGNhcmREZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpPT57XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgZGF0YS5faWQpO1xuICB9KTtcbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgIG1vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmRUaXRsZS50ZXh0Q29udGVudDtcbiAgICBtb2RhbEltYWdlLnNyYyA9IGNhcmRJbWFnZS5zcmM7XG4gICAgbW9kYWxJbWFnZS5hbHQgPSBjYXJkSW1hZ2UuYWx0O1xuICAgIG9wZW5Nb2RhbChpbWFnZU1vZGFsKTtcbiAgfSk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gY2xpY2tDbG9zZShldnQsIG1vZGFsKXtcbiAgaWYgKGV2dC50YXJnZXQgPT0gbW9kYWwpe1xuICAgIGNsb3NlTW9kYWwobW9kYWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVzY0Nsb3NlKGV2dCwgbW9kYWwpe1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKXtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICBjbGlja0Nsb3NlKGV2dCwgbW9kYWwpO1xufSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQpID0+IHtcbiAgICBlc2NDbG9zZShldnQsIG1vZGFsKTtcbn0pO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKXtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrQ2xvc2UpO1xuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlc2NDbG9zZSk7XG59XG5cbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKXtcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZT1wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlPXByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQ7XG4gIHJlc2V0VmFsaWRhdGlvbihlZGl0UHJvZmlsZUZvcm0sIFtwcm9maWxlTmFtZUlucHV0LCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dF0sIHNldHRpbmdzKVxuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59KTtcblxuZWRpdFByb2ZpbGVDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5uZXdQb3N0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKXtcbiAgb3Blbk1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxubmV3UG9zdENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxuZWRpdEF2YXRhckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCl7XG4gIG9wZW5Nb2RhbChlZGl0QXZhdGFyTW9kYWwpO1xufSk7XG5cbmVkaXRBdmF0YXJDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgY2xvc2VNb2RhbChlZGl0QXZhdGFyTW9kYWwpO1xufSk7XG5cbmltYWdlTW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgY2xvc2VNb2RhbChpbWFnZU1vZGFsKTtcbn0pO1xuXG5kZWxldGVNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcbn0pO1xuXG5kZWxldGVNb2RhbENhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG59KTtcblxuZGVsZXRlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZURlbGV0ZVN1Ym1pdCk7XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUpO1xuICBuZXdBcGkuZWRpdFVzZXJJbmZvKHtuYW1lOiBwcm9maWxlTmFtZUlucHV0LnZhbHVlLCBhYm91dDogcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWV9KVxuICAgIC50aGVuKChkYXRhKT0+IHtcbiAgICAgIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudD0gZGF0YS5uYW1lO1xuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudD0gZGF0YS5hYm91dDtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCk9PntcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCBmYWxzZSk7XG4gICAgfSk7XG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59XG5cbmVkaXRQcm9maWxlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlKTtcbiAgbmV3QXBpLmFkZE5ld0NhcmQoe25hbWU6IGFkZENhcmRDYXB0aW9uSW5wdXQudmFsdWUsIGxpbms6IGFkZENhcmRMaW5rSW5wdXQudmFsdWV9KVxuICAgIC50aGVuKChkYXRhKSA9PntcbiAgICAgIGNvbnN0IGluZm8gPSB7fTtcbiAgICAgIGluZm8ubGluayA9IGRhdGEubGluaztcbiAgICAgIGluZm8ubmFtZSA9IGRhdGEubmFtZTtcbiAgICAgIGNhcmRzTGlzdC5wcmVwZW5kKGdldENhcmRFbGVtZW50KGluZm8pKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCk9PntcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCBmYWxzZSk7XG4gICAgfSk7XG4gIGV2dC50YXJnZXQucmVzZXQoKTtcbiAgZGlzYWJsZUJ1dHRvbihjYXJkU3VibWl0QnRuLCBzZXR0aW5ncyk7XG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdChldnQpe1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUpO1xuICBuZXdBcGkuY2hhbmdlQXZhdGFyKHthdmF0YXI6IGVkaXRBdmF0YXJMaW5rSW5wdXQudmFsdWV9KVxuICAgIC50aGVuKChkYXRhKT0+e1xuICAgICAgcHJvZmlsZUF2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCk9PntcbiAgICAgIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCBmYWxzZSk7XG4gICAgfSk7XG4gIGV2dC50YXJnZXQucmVzZXQoKTtcbiAgZGlzYWJsZUJ1dHRvbihlZGl0QXZhdGFyU3VibWl0QnRuLCBzZXR0aW5ncyk7XG4gIGNsb3NlTW9kYWwoZWRpdEF2YXRhck1vZGFsKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgY2FyZElkKXtcbiAgb3Blbk1vZGFsKGRlbGV0ZU1vZGFsKTtcbiAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XG4gIHNlbGVjdGVkQ2FyZElkID0gY2FyZElkO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVTdWJtaXQoZXZ0KXtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlLCBcIkRlbGV0ZVwiLCBcIkRlbGV0aW5nXCIpO1xuICBuZXdBcGkuZGVsZXRlQ2FyZChzZWxlY3RlZENhcmRJZClcbiAgICAudGhlbigoKT0+e1xuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG4gICAgICBzZWxlY3RlZENhcmQucmVtb3ZlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyPT57XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKT0+e1xuICAgICAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIGZhbHNlLCBcIkRlbGV0ZVwiLCBcIkRlbGV0aW5nXCIpO1xuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGhhbmRsZUhlYXJ0QnRuKGNhcmRJZCwgaXNMaWtlZCwgY2FyZEhlYXJ0QnRuKXtcbiAgbmV3QXBpLnRvZ2dsZUxpa2UoY2FyZElkLCBpc0xpa2VkKVxuICAgIC50aGVuKCgpPT57XG4gICAgICBjYXJkSGVhcnRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2hlYXJ0LWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyPT57XG4gICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICB9KVxufVxuXG5lZGl0QXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQpO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcblxuYWRkQ2FyZEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUFkZENhcmRTdWJtaXQpOyIsImNsYXNzIEFwaXtcbiAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGhlYWRlcnN9KXtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbihyZXMgPT4ge1xuICAgICAgICBpZihyZXMub2spe1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gIH1cblxuICBnZXRJbmZvKCl7XG4gICAgcmV0dXJuICgoUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pKSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbihyZXMgPT4ge1xuICAgICAgICBpZihyZXMub2spe1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gIH1cblxuICBlZGl0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYocmVzLm9rKXtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQoe25hbWUsIGxpbmt9KXtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4ocmVzID0+IHtcbiAgICAgIGlmKHJlcy5vayl7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlQXZhdGFyKHthdmF0YXJ9KXtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHJlcyA9PiB7XG4gICAgICBpZihyZXMub2spe1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoaWQpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbihyZXMgPT4ge1xuICAgICAgaWYocmVzLm9rKXtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVMaWtlKGlkLCBpc0xpa2VkKXtcbiAgICBjb25zdCBtZXRob2QgPSBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCI7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4ocmVzID0+IHtcbiAgICAgIGlmKHJlcy5vayl7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTsiXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaW5wdXRFbCIsImNvbmZpZyIsImVycm9yTWVzc2FnZUlEIiwiaWQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiYWRkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJmb3JtRWxlbWVudCIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiYnV0dG9uRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJlbGVtZW50Iiwic2V0QnV0dG9uVGV4dCIsImJ0biIsImlzTG9hZGluZyIsImRlZmF1bHRUZXh0IiwibG9hZGluZ1RleHQiLCJlZGl0UHJvZmlsZUJ0biIsImVkaXRQcm9maWxlTW9kYWwiLCJlZGl0UHJvZmlsZUNsb3NlQnRuIiwibmV3UG9zdEJ0biIsIm5ld1Bvc3RNb2RhbCIsIm5ld1Bvc3RDbG9zZUJ0biIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJlZGl0UHJvZmlsZUZvcm0iLCJmb3JtcyIsImFkZENhcmRGb3JtRWxlbWVudCIsImFkZENhcmRMaW5rSW5wdXQiLCJhZGRDYXJkQ2FwdGlvbklucHV0IiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0IiwiaW1hZ2VNb2RhbCIsIm1vZGFsSW1hZ2UiLCJtb2RhbENhcHRpb24iLCJpbWFnZU1vZGFsQ2xvc2VCdG4iLCJjYXJkU3VibWl0QnRuIiwicHJvZmlsZUF2YXRhciIsImVkaXRBdmF0YXJNb2RhbCIsImVkaXRBdmF0YXJCdG4iLCJlZGl0QXZhdGFyRm9ybSIsImVkaXRBdmF0YXJMaW5rSW5wdXQiLCJlZGl0QXZhdGFyQ2xvc2VCdG4iLCJlZGl0QXZhdGFyU3VibWl0QnRuIiwiZGVsZXRlTW9kYWwiLCJkZWxldGVNb2RhbENsb3NlQnRuIiwiZGVsZXRlTW9kYWxDYW5jZWxCdG4iLCJkZWxldGVGb3JtIiwic2VsZWN0ZWRDYXJkIiwic2VsZWN0ZWRDYXJkSWQiLCJuZXdBcGkiLCJjb25zdHJ1Y3RvciIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5mbyIsImFsbCIsImdldFVzZXJJbmZvIiwiZWRpdFVzZXJJbmZvIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGROZXdDYXJkIiwibGluayIsImNoYW5nZUF2YXRhciIsImF2YXRhciIsImRlbGV0ZUNhcmQiLCJ0b2dnbGVMaWtlIiwiaXNMaWtlZCIsImF1dGhvcml6YXRpb24iLCJnZXRDYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGUiLCJjYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJjYXJkSGVhcnRCdG4iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnRhaW5zIiwiY2FyZElkIiwidG9nZ2xlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJoYW5kbGVIZWFydEJ0biIsIl9pZCIsIm9wZW5Nb2RhbCIsImhhbmRsZURlbGV0ZUNhcmQiLCJjbGlja0Nsb3NlIiwibW9kYWwiLCJ0YXJnZXQiLCJjbG9zZU1vZGFsIiwiZXNjQ2xvc2UiLCJrZXkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2FyZHMiLCJpbmZvIiwiaXRlbSIsImNyZWF0ZWRDYXJkIiwicHJlcGVuZCIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwiaW5wdXQiLCJzdWJtaXRCdG4iLCJzdWJtaXR0ZXIiLCJmaW5hbGx5IiwicmVzZXQiXSwic291cmNlUm9vdCI6IiJ9